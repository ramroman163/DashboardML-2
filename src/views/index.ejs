<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <link rel="stylesheet" href="styles.css">
    <title>Document</title>
</head>
<body class="p-3">
    <header class="mb-4">
        <a style="text-decoration: none; color: black" href="http://localhost:3000">
            <h1>⬅Dashboard</h1>
        </a>
    </header>
    <!-- state es un valor que vamos pasando cuando renderizamos -->
    <h4 class="mb-4">Cuenta seleccionada: <span class="link_state"> <%=state%> </span></h4>
    <% if(locals.message){%>
        <p class="mb-4"><%= locals.message %></p>
        <a style="text-decoration: none;" class="redirect__logout_auth" href="#">
            <button class="button__link btn btn-outline-primary mb-4" type="button">Vincular cuenta nuevamente</button>
        </a>
        <script src="setLogoutAuth.js"></script>
        <br>
    <% } else {%>
        <button class="button__sync btn btn-outline-primary" type="button">Sincronizar información de la cuenta</button>

        <section class="pub__status-container hidden mt-3">
            <h5>Sincronización de Publicaciones: </h5>
            <div class="progress mt-3" id="progress-container">
                <div class="progress-bar progress-bar-striped progress-bar-animated progress-bar-publications" id="progress-bar progress-bar-publications" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
        </section>
        <section class="ord__status-container hidden mt-3">
            <h5>Sincronización de Órdenes: </h5>
            <div class="progress mt-3" id="progress-container">
                <div class="progress-bar progress-bar-striped progress-bar-animated progress-bar-orders" id="progress-bar progress-bar-orders" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
        </section>
        
        <p class="status__sync hidden mt-3"></p>

        <section class="buttons_view hidden mb-4">
            <button class="button__sync btn btn-outline-primary me-4" type="button" onclick="verPublicaciones()">Ver Publicaciones</button>
            <button class="button__sync btn btn-outline-primary" type="button">Ver Ordenes</button>
        </section>

        <section class="table_section hidden mt-4">
            <table id="items_table" class="table table-active table-striped-columns w-100">
                <thead>
                  <tr>
                    <th scope="col">ID Publicación</th>
                    <th scope="col">Título</th>
                    <th scope="col">Precio</th>
                    <th scope="col">Estado</th>
                    <th scope="col">Última sincronización</th>
                  </tr>
                </thead>
                <tbody class="table__body table-primary">
                </tbody>
              </table>
        </section>
    <% }%>
    <br>
    <a href="/logout">
        <button class="btn btn-outline-danger mt-4" type="button">Cerrar sesión</button>
    </a>
    <script src="buttons/seePublications.js"></script> 
    <script src="sync.js"></script> 
    <script src="progressController.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>
</body>
</html>